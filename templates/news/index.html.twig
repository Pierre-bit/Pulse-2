{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}

{% if app.session.flashBag.has('success') %}
        <div class="alert alert-warning">
            {% for msg in app.session.flashBag.get('success') %}
                {{ msg }}
            {% endfor %}
        </div>
    {% endif %}

  <!-- Latest news section -->
	<div class="latest-news-section" style="margin:20px 0 20px 0;">
		<div class="ln-title">Dernière News</div>
		<div class="news-ticker">
			<div class="news-ticker-contant">
      
      {% for news in bandeauNews %}
      {% if loop.index0 == 0 %}
				<div class="nt-item"><span class="new">{{ news.artiste.nomArtiste|title}}</span>{{ news.titre|default('')}}</div>
      {% elseif loop.index0 == 1 %}  
      <div class="nt-item"><span class="strategy">{{ news.artiste.nomArtiste|title}}</span>{{ news.titre|default('')}}</div>
      {% else %}  
      <div class="nt-item"><span class="racing">{{ news.artiste.nomArtiste|title}}</span>{{ news.titre|default('')}}</div>
      {% endif %}
      {% endfor %}
				{# <div class="nt-item"><span class="strategy">strategy</span>Age of Empire IV, au cours de l'année 2020 </div>
				<div class="nt-item"><span class="racing">remake</span> Retrouvez Final Fantasy VII, sur Playstation 4 </div> #}
			</div>
		</div>
	</div>
	<!-- Latest news section end -->


<!--Carousel Wrapper-->
<div id="carousel-example-1z" class="carousel slide carousel-fade" data-ride="carousel">
  <!--Indicators-->
  <ol class="carousel-indicators">
    <li data-target="#carousel-example-1z" data-slide-to="0" class="active"></li>
    <li data-target="#carousel-example-1z" data-slide-to="1"></li>
    <li data-target="#carousel-example-1z" data-slide-to="2"></li>
    <li data-target="#carousel-example-1z" data-slide-to="3"></li>
  </ol>
  <!--/.Indicators-->
  <!--Slides-->
  <div class="carousel-inner" role="listbox">
      <!--First slide-->
    <div class="carousel-item active">
{% for carousel in carousels %}
    {% if loop.index0 ==  0 %}
      {% if is_granted('ROLE_ADMIN') %}
        {% if carousel.filename %}
          <a href="{{ path('carousel_index') }}" >
            <img class="card-img-top" src="{{vich_uploader_asset(carousel, 'imageFile') }}" alt="card-img-top" style="width: 100%; height:400px;">
          </a>
        {% else %}
          <a href="{{ path('carousel_index') }}" >
          <img class="card-img-top" src="/image/artiste/empty.jpg" alt="card-img-top" style="width: 100%; height:400px;">
          </a>
        {% endif %}

      {% else %}
        {% if carousel.filename %}
          <img class="card-img-top" src="{{vich_uploader_asset(carousel, 'imageFile') }}" alt="card-img-top" style="width: 100%; height:400px;">
        {% else %}
          <img class="card-img-top" src="/image/artiste/empty.jpg" alt="card-img-top" style="width: 100%; height:400px;">
        {% endif %}
      {% endif %}

    {% endif %}
{% endfor %}
    </div>
    <!--/First slide-->

    <!--Second slide-->
    <div class="carousel-item">
{% for carousel in carousels %}
    {% if loop.index0 == 1 %}

      {% if is_granted('ROLE_ADMIN') %}
        {% if carousel.filename %}
          <a href="{{ path('carousel_index') }}" >
            <img class="card-img-top" src="{{vich_uploader_asset(carousel, 'imageFile') }}" alt="card-img-top" style="width: 100%; height:400px;">
          </a>
        {% else %}
          <a href="{{ path('carousel_index') }}" >
          <img class="card-img-top" src="/image/artiste/empty.jpg" alt="card-img-top" style="width: 100%; height:400px;">
          </a>
        {% endif %}

      {% else %}
        {% if carousel.filename %}
          <img class="card-img-top" src="{{vich_uploader_asset(carousel, 'imageFile') }}" alt="card-img-top" style="width: 100%; height:400px;">
        {% else %}
          <img class="card-img-top" src="/image/artiste/empty.jpg" alt="card-img-top" style="width: 100%; height:400px;">
        {% endif %}
      {% endif %}


    {% endif %}
{% endfor %}

    </div>
    <!--/Second slide-->

    <!--Third slide-->
    <div class="carousel-item">
{% for carousel in carousels %}
    {% if loop.index0 == 2 %}

      {% if is_granted('ROLE_ADMIN') %}
        {% if carousel.filename %}
          <a href="{{ path('carousel_index') }}" >
            <img class="card-img-top" src="{{vich_uploader_asset(carousel, 'imageFile') }}" alt="card-img-top" style="width: 100%; height:400px;">
          </a>
        {% else %}
          <a href="{{ path('carousel_index') }}" >
          <img class="card-img-top" src="/image/artiste/empty.jpg" alt="card-img-top" style="width: 100%; height:400px;">
          </a>
        {% endif %}

      {% else %}
        {% if carousel.filename %}
          <img class="card-img-top" src="{{vich_uploader_asset(carousel, 'imageFile') }}" alt="card-img-top" style="width: 100%; height:400px;">
        {% else %}
          <img class="card-img-top" src="/image/artiste/empty.jpg" alt="card-img-top" style="width: 100%; height:400px;">
        {% endif %}
      {% endif %}

    {% endif %}
{% endfor %}

    </div>
    <!--/Third slide-->

    <!--4 slide-->
    <div class="carousel-item">
{% for carousel in carousels %}
    {% if loop.index0 == 3 %}

      {% if is_granted('ROLE_ADMIN') %}
        {% if carousel.filename %}
         <a href="{{ path('carousel_index') }}" >
            <img class="card-img-top" src="{{vich_uploader_asset(carousel, 'imageFile') }}" alt="card-img-top" style="width: 100%; height:400px;">
          </a>
        {% else %}
          <a href="{{ path('carousel_index') }}" >
          <img class="card-img-top" src="/image/artiste/empty.jpg" alt="card-img-top" style="width: 100%; height:400px;">
          </a>
        {% endif %}

      {% else %}
        {% if carousel.filename %}
          <img class="card-img-top" src="{{vich_uploader_asset(carousel, 'imageFile') }}" alt="card-img-top" style="width: 100%; height:400px;">
        {% else %}
          <img class="card-img-top" src="/image/artiste/empty.jpg" alt="card-img-top" style="width: 100%; height:400px;">
        {% endif %}
      {% endif %}

    {% endif %}
{% endfor %}
    </div>
    <!--/4 slide-->

      
  </div>
  <!--/.Slides-->
  <!--Controls-->
  <a class="carousel-control-prev" href="#carousel-example-1z" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carousel-example-1z" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
  <!--/.Controls-->
</div>
<!--/.Carousel Wrapper-->

    <div class="row" style="margin-top:50px;">
    <div class="col-6 offset-1">
    {% for news in newss %}
        <div class="row" style="margin-top:50px">
            <div class="col-md-4 " style="margin-top:50px">
           
                {% if news.artiste.filename %}
                    <img src="/images/artiste/{{news.artiste.filename}}" alt="card-img-top" style="width: 75%; height:200px; border-radius: 10px;">
                {% else %}
                    <img src="/image/artiste/empty.jpg" alt="card-img-top" style="width: 75%; height:200px;">
                {% endif %}
           
            </div>
        
            <div class="col-md-7" > 
                <div class="row" >
                    <div class="col-12">
                        <h2 style:"text-align:left;color:black;font-weight:bold;">
                        
                            {{ news.artiste.nomArtiste|title}}
                        
                            - 
                            
                                {{ news.titre|default('')}}
                            
                        </h2>
                    </div>
                </div>
                <div class="row" style="margin-top:30px;">
                    <h4 style:"text-align:left">
                        
                            {{ news.description  }}
                            </br>     
                    </h4>
                </div>
            </div>
        </div>
        <a href="{{ path('news_show', {'id': news.id})  }} ">Voir plus</a>
        </br>
        </br>
        <hr>
      {% endfor %}
    </div>
    <div class="col-4 offset-1 facebook">
    <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v5.0"></script>

<div class="fb-page" data-href="" data-tabs="timeline" data-width="" data-height="" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://fr-fr.facebook.com/wtplmusic" class="fb-xfbml-parse-ignore"><a href="https://fr-fr.facebook.com/wtplmusic"></a></blockquote></div>

    </div>
  </div>

{% if is_granted('ROLE_ADMIN') %}
    <a href="{{ path('news_new') }}" class="site-btn">Ajouter News</a>
{% endif %}
{% endblock %}
